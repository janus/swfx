{"version":3,"sources":["Server.js"],"names":["Server","port","ip","_app","_port","_ip","staticOptions","maxAge","use","express","static","path","join","__dirname","req","res","sendFile","resolve","get","send","countries","currencies","page","params","from","to","content","endCall","mreq","https","setEncoding","on","chunk","util","log","end","startUpMessage","listen","console"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAGqBA,M;AACjB,sBAAuC;AAAA,YAA3BC,IAA2B,uEAAtB,IAAsB;AAAA,YAAhBC,EAAgB,uEAAb,WAAa;;AAAA;;AACnC,aAAKC,IAAL,GAAY,wBAAZ;AACA,aAAKC,KAAL,GAAaH,IAAb;AACA,aAAKI,GAAL,GAAWH,EAAX;;AAEA,YAAMI,gBAAgB;AAClBC,oBAAQ;AADU,SAAtB;AAGA,aAAKJ,IAAL,CAAUK,GAAV,CAAc,MAAd,EAAsBC,kBAAQC,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,EAA+CP,aAA/C,CAAtB;AACA,aAAKH,IAAL,CAAUK,GAAV,CAAc,YAAd,EAA4BC,kBAAQC,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,EAAqDP,aAArD,CAA5B;AACA,aAAKH,IAAL,CAAUK,GAAV,CAAc,OAAd,EAAuBC,kBAAQC,MAAR,CAAe,gBAAf,EAAiCJ,aAAjC,CAAvB;AACA,aAAKH,IAAL,CAAUK,GAAV,CAAc,QAAd,EAAwB,UAACM,GAAD,EAAMC,GAAN;AAAA,mBAAcA,IAAIC,QAAJ,CAAaL,eAAKM,OAAL,CAAa,UAAb,CAAb,EAAuCX,aAAvC,CAAd;AAAA,SAAxB;AACD;AACC,aAAKH,IAAL,CAAUK,GAAV,CAAc,uBAAd,EAAuC,UAACM,GAAD,EAAMC,GAAN;AAAA,mBAAcA,IAAIC,QAAJ,CAAaL,eAAKM,OAAL,CAAa,yBAAb,CAAb,EAAsDX,aAAtD,CAAd;AAAA,SAAvC;AACA,aAAKH,IAAL,CAAUe,GAAV,CAAc,wBAAd,EAAwC,UAACJ,GAAD,EAAMC,GAAN;AAAA,mBAAcA,IAAII,IAAJ,CAASC,mBAAT,CAAd;AAAA,SAAxC;AACA,aAAKjB,IAAL,CAAUe,GAAV,CAAc,yBAAd,EAAyC,UAACJ,GAAD,EAAMC,GAAN;AAAA,mBAAcA,IAAII,IAAJ,CAASE,oBAAT,CAAd;AAAA,SAAzC;AACA,aAAKlB,IAAL,CAAUe,GAAV,CAAc,uBAAd,EAAuC,UAACJ,GAAD,EAAMC,GAAN,EAAc;;AAErD,gBAAIO,mEAAiER,IAAIS,MAAJ,CAAWC,IAA5E,SAAoFV,IAAIS,MAAJ,CAAWE,EAA/F,SAAqGX,IAAIS,MAAJ,CAAWE,EAAhH,SAAsHX,IAAIS,MAAJ,CAAWC,IAAjI,mBAAJ;AACA;;AAEA,gBAAIE,UAAU,EAAd;;AAEA,gBAAIC,UAAU,SAAVA,OAAU,CAACD,OAAD,EAAa;AAACX,oBAAII,IAAJ,CAASO,OAAT;AAAmB,aAA/C;;AAEA,gBAAIE,OAAOC,gBAAMX,GAAN,CAAUI,IAAV,EAAgB,UAASP,GAAT,EAAc;AACrCA,oBAAIe,WAAJ,CAAgB,MAAhB;AACAf,oBAAIgB,EAAJ,CAAO,MAAP,EAAe,UAAUC,KAAV,EAAiB;AAC5BN,+BAAWM,KAAX;AACH,iBAFD;;AAIAjB,oBAAIgB,EAAJ,CAAO,KAAP,EAAc,YAAY;AACtBE,mCAAKC,GAAL,CAASR,OAAT;AACAC,4BAAQD,OAAR;AACH,iBAHD;AAIH,aAVU,CAAX;;AAYAE,iBAAKO,GAAL;AACA;AAEC,SAxBD;AAyBA,aAAKhC,IAAL,CAAUe,GAAV,CAAc,GAAd,EAAoB,UAACJ,GAAD,EAAMC,GAAN;AAAA,mBAAcA,IAAIC,QAAJ,CAAaL,eAAKC,IAAL,CAAUC,SAAV,EAAqB,KAArB,EAA4B,YAA5B,CAAb,CAAd;AAAA,SAApB;AACH;;;;sCAEY;AACT,gBAAIuB,6DAA2D,KAAK/B,GAAhE,6BAA2F,KAAKD,KAAhG,MAAJ;AACA,iBAAKD,IAAL,CAAUkC,MAAV,CAAiB,KAAKjC,KAAtB,EAA6B,KAAKC,GAAlC,EAAuC;AAAA,uBAAMiC,QAAQJ,GAAR,CAAYE,cAAZ,CAAN;AAAA,aAAvC;AACH;;;;;;kBAhDgBpC,M","file":"../Server.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport countries from './countries.json';\nimport currencies from './currencies.json';\nimport  util from 'util';\nimport https from 'https';\n\n\nexport default class Server {\n    constructor(port=8000, ip='127.0.0.1') {\n        this._app = express();\n        this._port = port;\n        this._ip = ip;\n        \n        const staticOptions = {\n            maxAge: 0\n        };\n        this._app.use('/css', express.static(path.join(__dirname, '../css'), staticOptions));\n        this._app.use('/public/js', express.static(path.join(__dirname, '../public/js'), staticOptions));\n        this._app.use('/imgs', express.static('../public/imgs', staticOptions));\n        this._app.use('/sw.js', (req, res) => res.sendFile(path.resolve('../sw.js'), staticOptions));\n       // this._app.use('/sw.js.map', (req, res) => res.sendFile(path.resolve('../public/sw.js.map'), staticOptions));\n        this._app.use('/public/manifest.json', (req, res) => res.sendFile(path.resolve('../public/manifest.json'), staticOptions));\n        this._app.get('/server/countries.json', (req, res) => res.send(countries));\n        this._app.get('/server/currencies.json', (req, res) => res.send(currencies));\n        this._app.get('/currencies/:from-:to', (req, res) => { \n\n        let page = `https://free.currencyconverterapi.com/api/v3/convert?q=${req.params.from}_${req.params.to},${req.params.to}_${req.params.from}&compact=ultra`;\n        //https://www.currencyconverterapi.com/api/v3/convert?q=USD_PHP,PHP_USD&compact=ultra&apiKey=YOUR_API_KEY   \n\n        let content = \"\";   \n            \n        let endCall = (content) => {res.send(content);};\n\n        let mreq = https.get(page, function(res) {\n            res.setEncoding(\"utf8\");\n            res.on(\"data\", function (chunk) {\n                content += chunk;\n            });\n\n            res.on(\"end\", function () {\n                util.log(content);\n                endCall(content);\n            });\n        });\n\n        mreq.end();\n        //res.send(content);\n        \n        });\n        this._app.get('/',  (req, res) => res.sendFile(path.join(__dirname, '../', 'index.html')));    \n    }\n    \n    startServer(){\n        let startUpMessage = `Olfx Server is running with IP address ${this._ip} and listens on port ${this._port} `\n        this._app.listen(this._port, this._ip, () => console.log(startUpMessage))\n    }\n}\n \n\n\n"]}